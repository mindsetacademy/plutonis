(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{6213:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/momentum",function(){return r(8159)}])},2254:function(e,t,r){"use strict";var a=r(5893),i=r(6046);t.Z=function(e){var t=e.withMenu;return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{className:"flex items-center justify-center",style:{background:'url("/assets/images/bg_quantum.jpg") top center no-repeat',backgroundSize:"cover",height:"100vh"},children:(0,a.jsx)("img",{src:"/assets/images/loading.gif",className:"w-[60px] h-[60px] mt-[50px] mx-auto",alt:"loading"})})]})}},3904:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(5893),i=r(4561),n=r(4046);function o(e){var t=e.sym,r=e.current,o=e.ig,l=e.onClick;return(0,a.jsxs)("div",{"data-key":t.name,className:"indice-card mx-[4px] cursor-pointer ".concat(r&&t.price>0?"current":""),onClick:function(){return l(t.key)},children:[(0,a.jsxs)("p",{className:"weight-600 leading-[12px] m-auto",children:[t.name,o&&o.connected?"*":""]}),t.price>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"".concat(t.price>0?"text-positive":"text-negative"),children:(0,n.u)(t.price)}),(0,a.jsx)("p",{className:"".concat(t.vol>0?"text-positive":"text-negative"),children:(0,n.u)(t.vol)}),(0,a.jsxs)("p",{className:"".concat(t.perc>0?"text-positive":"text-negative"),children:[(0,n.u)(t.perc)," %"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.ZP,{viewBox:"0 0 380 96",children:(0,a.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"380",height:"70"})}),(0,a.jsx)(i.ZP,{viewBox:"0 0 380 96",children:(0,a.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"380",height:"70"})}),(0,a.jsx)(i.ZP,{viewBox:"0 0 380 96",children:(0,a.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"380",height:"70"})})]})]},t.name)}},4570:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(5893);function i(e){var t=e.children,r=e.className,i=e.style;return(0,a.jsx)("header",{className:r,style:i,children:t})}},815:function(e,t,r){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return!1;if(["demo"].indexOf(e.role)>-1)return!1;switch(t){default:return!0;case"quantum":return!("hedging"==r&&["basic"].indexOf(e.role)>-1)&&["admin","pro","basic"].indexOf(e.role)>-1;case"momentum":return["admin"].indexOf(e.role)>-1||["pro","basic"].indexOf(e.momentum)>-1}}r.d(t,{Z:function(){return a}})},8159:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var a=r(4051),i=r.n(a),n=r(5893),o=r(6154),l=r(1163),s=r(7294),c=r(8829),u=r(4570),p=r(6046),d=r(8161),f=r(2254),m=r(3656),x=r(9491),g=r(4046);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h={calc:function(e){var t=function(t){for(var r=0;r<u.length;r++){c[t].legs||(c[t].legs=[]);var a=0,o=u[r],s=Number(c[t].und);switch(o.type){case 3:a=Math.max(s-o.strike,0)*e.strategia.operations[r].qty*i;break;case 4:a=Math.max(o.strike-s,0)*e.strategia.operations[r].qty*i;break;case 2:a=s*n*i}c[t].legs[r]=Math.round(a*o.position*l)/l}c[t].value=c[t].legs.reduce((function(e,t){return e+t})),u.map((function(e,r){c[t].pl||(c[t].pl=[]),c[t].pl[r]=Math.round((c[t].legs[r]+e.cf)*l)/l})),c[t].totalPl=Math.round(100*c[t].pl.reduce((function(e,t){return e+t})))/100},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e.strategia.operations.length,i=["income","speculativa"].indexOf(e.strategia.key)>-1?1:e.strategia.result.valore_contratto||1,n=(e.strategia.result.qty,1),o=6,l=Math.pow(10,o),s={nan:1,stock:2,call:3,put:4},c=[];Array.from({length:100*r},(function(e,t){return(t+1)/r})).map((function(e,t){c[t]={und:e}}));for(var u=[],p=0;p<a;p++)u.push({position:"buy"==e.strategia.operations[p].op?1:-1,type:s[e.strategia.operations[p].type],strike:Math.round(e.strategia.operations[p].strikePrice),price:e.strategia.operations[p].price,cf:("buy"==e.strategia.operations[p].op?-1:1)*e.strategia.operations[p].price*e.strategia.operations[p].qty*i});for(var d=0;d<c.length;d++)t(d);return c},getBars:function(e){var t=[];e.map((function(e){return t.push(e.totalPl>0?1:e.totalPl<0?-1:0)}));var r=[],a=t[0];return t.map((function(t,i){i?a!=t&&(r[r.length-1].to=e[i-1].und,a=t,r.push({from:e[i].und,to:null,sign:a})):r.push({from:0,to:null,sign:a})})),r[r.length-1].to||(r[r.length-1].to=e[t.length-1].und),r},result:{speculativa:function(e){return e.strategia.operations[0].qty=-1*e.strategia.result.prize/e.strategia.operations[0].price,e.breakeven=e.strategia.operations[0].strikePrice-e.strategia.operations[0].price,e.strategia.result.profitto_simulato=h.deep.profitto(e),e},conservativa:function(e){var t,r,a=h.calc(e),i={pos:a.filter((function(e){return e.totalPl>0})).map((function(e){return Number(e.totalPl)})),neg:a.filter((function(e){return e.totalPl<0})).map((function(e){return Number(e.totalPl)}))},n=(e.strategia.result.qty,e.strategia.operations[1]),o=e.strategia.operations[0];n.price,o.price;e.strategia.result.max_profit=(t=Math).max.apply(t,b(i.pos)),e.strategia.result.max_loss=(r=Math).min.apply(r,b(i.neg)),e.strategia.result.profitto_simulato=h.deep.profitto(e);o.strikePrice,n.strikePrice,e.strategia.result.prezzo_simulato;return e.breakeven=n.strikePrice-Math.abs(o.price-n.price),e},income:function(e,t){return"price"==t?(e.strategia.result.rendimento=h.deep.rendimento(e),e.strategia.operations[0].qty=h.deep.numeroDiContrattiMassimi(e),e.strategia.result.rischio=h.deep.punteggioDiRischio(e),e.strategia.result.premio_incassato=h.deep.premioMensileIncassato(e)):(e.strategia.result.premio_incassato=h.deep.premioMensileIncassato(e),e.strategia.operations[0].qty=h.deep.numeroDiContrattiMassimi(e),e.strategia.operations[0].price=h.deep.prezzoIndicativo(e),e.strategia.result.rischio=h.deep.punteggioDiRischio(e)),e.strategia.result.profitto_simulato=h.deep.profitto(e),e.breakeven=Math.round(Number(e.strategia.operations[0].strikePrice))+Number(e.strategia.operations[0].price),e}},deep:{punteggioDiRischio:function(e){var t=Number(e.strategia.operations[0].qty)/Number(e.result.capitale)*1e4;return t=Math.min(t,400),Math.round(10*t)/10},numeroDiContrattiMassimi:function(e){var t=Number(e.result.capitale);return(t*Number(e.strategia.result.rendimento)/100+t)/Number(e.strategia.result.prezzo_sicurezza)},rendimento:function(e){var t=Number(e.strategia.operations[0].price);return 100*t/(Number(e.strategia.result.prezzo_sicurezza)-t)},profitto:function(e){var t=Number(e.strategia.result.prezzo_simulato)||.1;return t>100&&(t=100),t=Math.round(10*t)/10,h.calc(e).find((function(e){return e.und==t})).totalPl},premioMensileIncassato:function(e){var t=Number(e.result.capitale)*Number(e.strategia.result.rendimento)/100;return Math.round(100*t)/100},prezzoIndicativo:function(e){var t=Number(e.strategia.result.premio_incassato),r=Number(e.strategia.operations[0].qty);return Math.round(t/r*100)/100}},cumnormdist:function(e){var t=.31938153,r=-.356563782,a=1.781477937,i=-1.821255978,n=1.330274429,o=.2316419,l=.39894228,s=0;return e>=0?(s=1/(1+o*e),1-l*Math.exp(-e*e/2)*s*(s*(s*(s*(s*n+i)+a)+r)+t)):(s=1/(1-o*e),l*Math.exp(-e*e/2)*s*(s*(s*(s*(s*n+i)+a)+r)+t))},prezzoStimatoCall:function(e){var t,r=(e.probability.interestRate||0)/100,a=e.probability.volatilita/100,i=e.days||0,n=Number(e.symbol.price),o=null===(t=e.strategia.operations)||void 0===t?void 0:t.find((function(e){return"sell"==e.op&&"call"==e.type}));o||(o=e.strategia.operations[0]);var l=Math.round(100*Number(e.breakeven||(null===o||void 0===o?void 0:o.strikePrice)))/100,s=Math.log(n/l),c=r+.5*Math.pow(a,2),u=i/365,p=n*h.cumnormdist((s+c*u)/(a*Math.sqrt(i/365)))-l*Math.exp(-1*r*i/365)*h.cumnormdist((Math.log(n/l)+(r+.5*Math.pow(a,2))*i/365)/(a*Math.sqrt(i/365))-a*Math.sqrt(i/365));return Math.round(100*p)/100},prezzoStimatoPut:function(e){var t,r=Number(e.symbol.price),a=null===(t=e.strategia.operations)||void 0===t?void 0:t.find((function(e){return"sell"==e.op&&"call"==e.type}));a||(a=e.strategia.operations[0]);var i=Number(e.breakeven||(null===a||void 0===a?void 0:a.strikePrice)),n=(e.probability.interestRate||0)/100,o=e.days||0,l=(e.probability.prezzoStimatoCall||0)+i*Math.exp(-1*n*o/365)-r;return Math.round(100*l)/100},probability:function(e){var t,r=Number(e.symbol.price),a=null===(t=e.strategia.operations)||void 0===t?void 0:t.find((function(e){return"sell"==e.op&&"call"==e.type}));a||(a=e.strategia.operations[0]);var i=Number(e.breakeven||(null===a||void 0===a?void 0:a.strikePrice)),n=e.days?e.days/365:0,o=e.probability.volatilita/100*Math.sqrt(n),l=Math.log(i/r)/o,s=Math.floor(1/(1+.2316419*Math.abs(l))*1e5)/1e5,c=1-Math.floor(.3989423*Math.exp(-l*l/2)*1e5)/1e5*(1.330274*Math.pow(s,5)-1.821256*Math.pow(s,4)+1.781478*Math.pow(s,3)-.356538*Math.pow(s,2)+.3193815*s);return c=Math.floor(1e5*c)/1e5,l<0&&(c=1-c),{above:Math.floor(1e3*c)/10,below:Math.floor(1e3*(1-c))/10}},getHumanDate:function(e,t){return e?("string"===typeof e&&(e=new Date(e)),e.getDate()+" "+t[e.getMonth()].substring(0,3)+" "+e.getFullYear()):""},getExpiringDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=new Date(e),a=r.getMonth(),i=[];for(r.setDate(1);r.getDay()!==t;)r.setDate(r.getDate()+1);for(;r.getMonth()===a;)i.push(new Date(r.getTime())),r.setDate(r.getDate()+7);return i[2]}},y=h,j=r(8489),w=r(3996);function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){var t=e.data,r=e.calculate,a=(0,x.Z)(),i=a.t,o=(a.lang,(0,m.a)()),l=o.authUser,c=(o.loading,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Number(e.symbol.price);new Date;e.expire||(e.expire=y.getExpiringDate(e.month,3));var i=e.expire-Number(e.today);e.days=Math.ceil(i/864e5),e.strategia.operations.map((function(r,i){var n=0,o=0;switch(t){default:case"strikePerc":case"price":r.strikePerc=parseFloat((r.strikePerc||0).toFixed(1)),n=Number(a+a*Number(r.strikePerc)/100),r.strikePrice=Math.round(n),r.strikePnt=Math.round(10*(n-a))/10;break;case"strikePrice":o=-1*(1-r.strikePrice/a)*100,r.strikePerc=parseFloat(o.toFixed(2)),r.strikePnt=Math.round(10*(r.strikePrice-a))/10;break;case"strikePnt":r.strikePnt=parseFloat(r.strikePnt.toFixed(2)),r.strikePrice=a+r.strikePnt,o=-1*(1-r.strikePrice/a)*100,r.strikePerc=parseFloat(o.toFixed(1))}r.strikePrice=Math.round(100*r.strikePrice)/100,e.strategia.operations[i]=r})),r(e,t)}),u=function(e,r,a){var i=a?Math.pow(10,a):1;Math.round(Number(r)*i);var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){k(e,t,r[t])}))}return e}({},t,k({},e,r));c(n,e)},p=function(e,r,a){var i=Object.assign({},t);i.strategia.operations[a][e]=r,c(i,e)};return(0,s.useEffect)((function(){var e=Object.assign({},t);e.expire=y.getExpiringDate(t.month,3),c(e)}),[t.strategia.key]),(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsx)(j.Z,{title:i("pages.profitRisk.yieldCalculator"),icon:"calculate",foldable:!0,children:(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsx)("div",{className:"flex flex-row gap-[24px]",children:(0,n.jsx)("div",{className:"w-1/2",children:(0,n.jsx)(w.Z,{label:"Sottostante",className:"no-margin ",type:"number",value:t.symbol.price,onChange:function(e){return function(e){var r=Object.assign({},t);r.symbol.price=e,c(r,"price")}(e)}})})}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-1/2",children:(0,n.jsx)(w.Z,{type:"date",label:i("pages.profitRisk.todayDate"),className:"no-margin ",locale:l.pref.lang,onChange:function(e){return u("today",e)},value:t.today?t.today.toISOString().split("T")[0]:null})}),(0,n.jsx)("div",{className:"w-1/2",children:(0,n.jsx)(w.Z,{type:"date",label:i("common.expiry"),className:"no-margin ",locale:l.pref.lang,onChange:function(e){return u("expire",e)},value:t.expire?t.expire.toISOString().split("T")[0]:null})})]})]})}),t.strategia.operations.map((function(e,t){return(0,n.jsx)(j.Z,{title:"Operazione: ".concat(e.op.toUpperCase()," ").concat(e.type.toUpperCase()),icon:"check",foldable:!0,children:(0,n.jsx)("div",{className:"flex flex-row gap-[24px] items-center",children:(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row gap-[24px]",children:[(0,n.jsxs)("div",{className:"w-full flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",className:"no-margin",label:i("pages.profitRisk.distanceFromStrikePrice"),after:"%",value:e.strikePerc?(0,g.u)(e.strikePerc,2,!0):"",step:.1,onChange:function(e){return p("strikePerc",e,t)}}),(0,n.jsx)(w.Z,{type:"number",label:"Strike Price Level",className:"no-margin ",value:e.strikePrice?(0,g.u)(null===e||void 0===e?void 0:e.strikePrice,0,!0):"",step:1,onChange:function(e){return p("strikePrice",e,t)}})]}),(0,n.jsxs)("div",{className:"w-full flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",label:"Distanza in punti",className:"no-margin ",value:e.strikePnt?(0,g.u)(null===e||void 0===e?void 0:e.strikePnt,2,!0):"",step:.01,onChange:function(e){return p("strikePnt",e,t)}}),(0,n.jsx)(w.Z,{label:"Prezzo",className:"no-margin",type:"number",step:.01,min:0,value:(0,g.u)(e.price,2,!0),onChange:function(e){return p("price",e,t)}})]})]})})},t.toString())}))]})},P=r(2262),z=r(4429);var S=function(e){var t=e.index,r=e.data,a=e.calculate,i=e.target,o=e.symbol,l=e.partWidth,c=e.setTarget,u=(0,s.useState)(0),p=u[0],d=u[1],f=(0,s.useState)({strikePrice:0,type:"call",op:"sell",price:0,qty:0}),m=f[0],x=f[1];(0,s.useEffect)((function(){r&&(r.strategia.operations[t].qty=Math.round(100*r.strategia.operations[t].qty)/100,x(r.strategia.operations[t]))}),[r,t]);var g=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e,n,l,s=function(e){d(0),c(-1),window.removeEventListener("mousemove",u)},u=function(e){if(e.preventDefault(),g.current&&i===t&&!(Math.abs(e.pageX-p)<50)){d(e.pageX);var n=Object.assign({},r);n.strategia.operations[t].strikePrice+=e.movementX>0?1:-1,n.strategia.operations[t].strikePrice=Math.round(n.strategia.operations[t].strikePrice);var l=Number(o.price),s=-1*(1-n.strategia.operations[t].strikePrice/l)*100;n.strategia.operations[t].strikePerc=parseFloat(s.toFixed(2)),n.strategia.operations[t].strikePnt=Math.round(10*(n.strategia.operations[t].strikePrice-l))/10,a(n)}};if(g.current){var f=function(e){var r;if(!(p>0)){c(t),"touchstart"===e.type?d(e.touches[0].pageX):d(e.pageX);(e.target===g.current||(null===(r=g.current)||void 0===r?void 0:r.contains(e.target)))&&!0}},m=function(){var e;c(t),null===(e=g.current)||void 0===e||e.removeEventListener("click",m)};return null===(e=g.current)||void 0===e||e.addEventListener("touchstart",f),window.addEventListener("touchend",s),window.addEventListener("touchmove",u),null===(n=g.current)||void 0===n||n.addEventListener("click",m),null===(l=g.current)||void 0===l||l.addEventListener("mousedown",f),window.addEventListener("mouseup",s),window.addEventListener("mousemove",u),window.addEventListener("click",s),function(){var e,t;null===(e=g.current)||void 0===e||e.removeEventListener("touchstart",f),window.removeEventListener("touchend",s),window.removeEventListener("touchmove",u),null===(t=g.current)||void 0===t||t.removeEventListener("mousedown",f),window.removeEventListener("mouseup",s),window.removeEventListener("click",s),window.removeEventListener("mousemove",u)}}}),[g,l,p,i]),"sell"==m.op?(0,n.jsxs)("div",{className:"absolute shape_sell bottom-[40px] text-white",style:{left:(null===m||void 0===m?void 0:m.strikePrice)*l-l/2},draggable:!0,ref:g,children:[(0,n.jsxs)("div",{className:"h-[16px] absolute w-[81px] left-[10px] bottom-[16px]",children:[(0,n.jsx)("div",{className:"absolute text-[14px] left-[2px] font-[600]",children:"SELL"}),(0,n.jsx)("div",{className:" absolute text-[10px] h-[14px] leading-[13px] px-[2px] text-[#af5734] border-[1px] border-solid border-[#af5734] top-[3px] right-[1px] rounded-[2px] font-[600]",children:m.type.toUpperCase()})]}),(0,n.jsx)("div",{className:"absolute left-[7px] top-[22px] h-[60px] w-[88px] text-[12px]",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-[12px]",children:(0,n.jsx)("span",{className:"block",children:m.strikePrice.toFixed(2)})}),(0,n.jsxs)("div",{className:"text-[11px] ",children:["(",r.days,"d)"]}),(0,n.jsxs)("div",{className:"font-[600] ",children:[(0,n.jsx)("span",{children:"@"}),null===m||void 0===m?void 0:m.price]}),(0,n.jsx)("div",{children:null===m||void 0===m?void 0:m.qty})]})})]}):(0,n.jsxs)("div",{className:"absolute shape_buy top-[20px] text-white",draggable:!0,ref:g,style:{left:m.strikePrice*l-l/2},children:[(0,n.jsxs)("div",{className:"h-[16px] absolute w-[81px] left-[10px] top-[2px]",children:[(0,n.jsx)("div",{className:"absolute text-[14px] left-[2px] font-[600]",children:"BUY"}),(0,n.jsx)("div",{className:" absolute text-[10px] h-[14px] leading-[13px] px-[2px] text-[#8eb768] border-[1px] border-solid border-[#8eb768] top-[3px] right-[1px] rounded-[2px] font-[600]",children:m.type.toUpperCase()})]}),(0,n.jsx)("div",{className:"absolute left-[7px] top-[22px] h-[60px] w-[88px] text-[12px]",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-[12px]",children:(0,n.jsx)("span",{className:"block",children:m.strikePrice.toFixed(2)})}),(0,n.jsxs)("div",{className:"text-[11px] ",children:["(",r.days,"d)"]}),(0,n.jsxs)("div",{className:"font-[600] ",children:[(0,n.jsx)("span",{children:"@"}),null===m||void 0===m?void 0:m.price]}),(0,n.jsx)("div",{children:null===m||void 0===m?void 0:m.qty})]})})]})};function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function C(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t=e.data,r=e.calculate,a=function(e,t){return(F.current.getBoundingClientRect().width-B)/t*e+1.5*B},i=function(e,t){var r=F.current.getBoundingClientRect().height,a=r/2-r*e/(2*t);return a+5*(a<r/2?-1:1)*Math.log(a)},o=function(e){return!isNaN(e)&&parseInt(Number(e).toString())==e&&!isNaN(parseInt(e.toString(),10))},l=(0,z.Z)(),c=Array.from({length:101},(function(e,t){return t})),u=(0,s.useState)(28),p=u[0],d=u[1],f=(0,s.useState)(900),m=f[0],x=f[1],g=(0,s.useState)(-1),v=g[0],b=g[1],h=(0,P.Z)().isLg,w=(0,s.useState)(50),k=w[0],N=w[1],M=(0,s.useState)(0),O=M[0],_=M[1],Z=(0,s.useState)([]),E=Z[0],D=Z[1],R=(0,s.useRef)(null);(0,s.useEffect)((function(){if(R.current&&l){var e=document.body.getBoundingClientRect().width-(h?240:0);x(Number(e));var t=R.current,r=!1,a=0,i=0,n=function(e){v>-1||(r=!0,a=e.pageX-t.offsetLeft,i=t.scrollLeft)},o=function(e){r=!1},s=function(e){if(e.preventDefault(),r&&!(v>-1)){var n=e.pageX-t.offsetLeft-a;t.scrollLeft=i-n}};return t.addEventListener("mousemove",s),t.addEventListener("mousedown",n,!1),t.addEventListener("mouseup",o,!1),t.addEventListener("mouseleave",o,!1),function(){t.removeEventListener("mousemove",s),t.removeEventListener("mousedown",n),t.removeEventListener("mouseup",o),t.removeEventListener("mouseleave",o)}}}),[R,v,l]);var L=function(e){if(R.current)switch(e){case"forward":R.current.scrollLeft+=k;break;case"back":R.current.scrollLeft-=k}};(0,s.useEffect)((function(){if(R.current){var e=R.current.getBoundingClientRect().width/k;R.current.scrollLeft=k*(p-e/2)}}),[m,k,p]);var F=(0,s.useRef)(null),q=(0,s.useState)(100),I=q[0],T=q[1],X=(0,s.useState)(0),A=X[0],U=X[1],B=10;(0,s.useEffect)((function(){var e=[];Object.assign({},t);t.strategia.operations.map((function(t){return e.push(Math.round(t.strikePrice))}));var r=y.calc(t,10),n=F.current,l=n.getBoundingClientRect(),s=n.getContext("2d");s.canvas.height=l.height,s.canvas.width=l.width,s.lineWidth=5,s.strokeStyle="#000",s.beginPath(),null===s||void 0===s||s.moveTo(a(0,r.length),i(r[0].totalPl,I)),s.fillStyle="#f00";var c=0;r.map((function(e,t){c=Math.max(c,Math.abs(e.totalPl)),o(e.und)&&s.lineTo(a(t,r.length),i(e.totalPl,I))})),U(c),s.stroke(),r.map((function(e,t){o(e.und)&&(s.beginPath(),s.arc(a(t,r.length),i(e.totalPl,I),4,0,2*Math.PI,!0),s.fill())})),s.fillStyle="#000",s.font="14px Arial",r.map((function(e,t){if(o(e.und)){var n=e.totalPl>0?10:-3*e.totalPl.toString().length;s.fillText(Math.round(Number(e.totalPl)).toString(),a(t,r.length)+n,i(e.totalPl,I)+(e.totalPl>0?-10:20))}})),D(y.getBars(r))}),[t,I,k]),(0,s.useEffect)((function(){V()}),[t.strategia.key]),(0,s.useEffect)((function(){return T(A/2)}),[A]),(0,s.useEffect)((function(){return _(k/1e3)}),[k]);var V=function(){var e=[];t.strategia.operations.map((function(t){return e.push(Math.round(t.strikePrice))}));var r=e.reduce((function(e,t){return e+t}),0)/e.length;if(e.length>1){var a,i,n=(a=Math).min.apply(a,C(e)),o=(i=Math).max.apply(i,C(e));d(r-(o-n)/2+4)}else d(r)};return(0,n.jsx)(j.Z,{title:"Grafico",icon:"insights",foldable:!0,children:(0,n.jsxs)("div",{className:"mt-4 relative h-[400px]",style:{width:m},id:"momentum_graph",children:[(0,n.jsx)("div",{className:"absolute h-[25px] w-[80px] bg-[#262626] left-0 top-[187px]",onClick:function(){return L("back")},children:(0,n.jsx)("span",{className:"inline-block rotate-[0deg] text-white font-bold pl-2 leading-[24px]",children:"<"})}),(0,n.jsxs)("div",{className:"absolute right-[20px] top-[0px] flex flex-col gap-[5px]",children:[(0,n.jsx)("span",{className:"cursor-pointer border-[1px] border-[#000] px-[5px] py-[10px] leading-[0px] text-[18px] font-[600] text-center",onClick:function(){return T(1.5*I)},children:"+"}),(0,n.jsx)("span",{className:"cursor-pointer border-[1px] border-[#000] px-[5px] py-[10px] leading-[0px] text-[18px] font-[600] text-center",onClick:function(){.5*I>0&&T(.5*I)},children:"-"})]}),(0,n.jsxs)("div",{className:"absolute right-[8px] top-[60px] flex flex-row gap-[5px]",children:[(0,n.jsx)("span",{className:"cursor-pointer border-[1px] border-[#000] px-[5px] py-[10px] leading-[0px] text-[14px] font-[600] text-center",onClick:function(){N(k+10)},children:"<"}),(0,n.jsx)("span",{className:"cursor-pointer border-[1px] border-[#000] px-[5px] py-[10px] leading-[0px] text-[14px] font-[600] text-center",onClick:function(){k-10>m/99&&N(k-10)},children:">"})]}),(0,n.jsx)("div",{id:"thegraph",className:"block h-[400px] absolute left-[80px] top-0 overflow-hidden",ref:R,style:{width:m-160},children:(0,n.jsxs)("div",{style:{width:k*c.length,left:0},className:"h-[400px] relative block top-0 whitespace-nowrap ",children:[c.map((function(e){return(0,n.jsxs)("div",{id:"price".concat(e),className:"absolute text-[12px] whitespace-nowrap inline-block",style:{left:k*e,top:187,width:k},children:[(0,n.jsx)("div",{className:"vertical-line top-[50%] h-[400px] mt-[-200px] absolute left-[50%] w-[2px] opacity-20 bg-black "}),(0,n.jsx)("div",{className:"content bg-[#262626] h-[25px] z-2 relative text-[#fff] leading-[25px] text-center",children:(0,n.jsx)("div",{className:"price",children:e})})]},e)})),E.map((function(e,t){var r,a,i,o,l=["0","0","0","0"],s=e.sign>0?"positive":e.sign<0?"negative":"neutre";(l=e.sign>=0?["20px","20px","0","0"]:["0","0","20px","20px"],e.sign>=0)?(0==e.from&&(l[0]="0"),0==e.to&&(l[1]="0"),e.to==(null===(r=E[t+1])||void 0===r?void 0:r.from)-1&&(null===(a=E[t+1])||void 0===a?void 0:a.sign)>=0&&(l[1]="0"),e.from==(null===(i=E[t-1])||void 0===i?void 0:i.to)+1&&(null===(o=E[t-1])||void 0===o?void 0:o.sign)>=0&&(l[0]="0")):100==e.to&&(l[2]="0");var c=e.from.toFixed(100..toString().length).split(".").map((function(e){return Number(e)})),u=e.to.toFixed(100..toString().length).split(".").map((function(e){return Number(e)}));return(0,n.jsx)("div",{className:"absolute h-[158px] overflow-hidden bar_".concat(s),style:{top:e.sign>=0?30:"auto",bottom:e.sign<0?30:"auto",left:c[0]*k+(c[1]-100*t)*O+k/2,width:(u[0]-c[0])*k+(u[1]-c[1])*O,borderRadius:l.join(" ")}},t.toString())})),(0,n.jsx)("canvas",{ref:F,className:"absolute top-0 left-0 h-full",style:{width:k*c.length}}),t.strategia.operations.map((function(e,a){return(0,n.jsx)(S,{data:t,target:v,setTarget:b,index:a,calculate:r,symbol:t.symbol,partWidth:k},a)}))]})}),(0,n.jsx)("div",{className:"absolute h-[25px] w-[80px] bg-[#262626] right-0 text-right top-[187px]",onClick:function(){return L("forward")},children:(0,n.jsx)("span",{className:"inline-block text-white font-bold pr-2 leading-[24px]",children:">"})})]})})},_=r(782);function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t,r=e.data,a=e.calculate,i=(0,x.Z)(),o=i.t,l=(i.lang,(0,m.a)()),c=(l.authUser,l.loading),u=(0,s.useState)(!1),p=(u[0],u[1],(0,P.Z)().isLg);(0,s.useEffect)((function(){var e;(null===(e=r.symbol)||void 0===e?void 0:e.price)&&a(r)}),[r.symbol,r.strategia.result]);var d=function(e,t,i){var n,l=Object.assign({},r);if(-1==["oggi","scadenza"].indexOf(e)){var s=i?Math.pow(10,i):1;n=Math.round(t*s)/s}else"oggi"===e||"scadenza"===e&&new Date(t)>=new Date(l.probability.oggi)?n=new Date(t).toISOString().split("T")[0]:_.Am.error(o("validation.invalidDate"));l.probability=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){Z(e,t,r[t])}))}return e}({},l.probability,Z({},e,n)),a(l)},f=(0,s.useState)(!0);f[0],f[1];return c?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"prob overflow-hidden ",children:(0,n.jsx)(j.Z,{foldable:!0,title:"Probabilit\xe0",icon:"multiline_chart",children:(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full flex flex-col items-start gap-[16px] xl:gap-[24px]",children:(0,n.jsx)(w.Z,{type:"slider",slider:!0,inputColor:"#2BD99F",min:0,max:400,step:.01,className:"no_border no_padding_".concat(p?"left":"x"),label:o("pages.profitRisk.annualVolatility"),value:(0,g.u)(r.probability.volatilita,2,!0),onChange:function(e){return d("volatilita",e,1)},onSlideChange:function(e){return d("volatilita",e.x,1)},isPercent:!0})}),(0,n.jsxs)("div",{className:"w-full flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"readonly",label:o("pages.profitRisk.daysToExpiration"),className:"no-margin",value:null===(t=Number(r.days))||void 0===t?void 0:t.toFixed(0)})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"number",after:"%",step:.01,min:0,max:100,onChange:function(e){return d("interestRate",e,2)},value:(0,g.u)(r.probability.interestRate?Number(r.probability.interestRate):0,2,!0),label:o("pages.profitRisk.interestRate")})})]}),(0,n.jsxs)("div",{className:"w-full items-center flex flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-[24px] w-full",children:[(0,n.jsx)("div",{className:"w-full flex flex-col gap-[10px] ",children:(0,n.jsx)(w.Z,{type:"readonly",inputSize:"20px",value:(0,g.u)(r.probability.prezzoStimatoCall,r.probability.prezzoStimatoCall>0?2:0),label:o("pages.profitRisk.estimatedPriceCall")})}),(0,n.jsx)("div",{className:"w-full flex flex-col gap-[10px]",children:(0,n.jsx)(w.Z,{type:"readonly",inputSize:"20px",value:(0,g.u)(r.probability.prezzoStimatoPut,r.probability.prezzoStimatoPut>0?2:0),label:o("pages.profitRisk.estimatedPricePut")})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px] w-full",children:[(0,n.jsx)("div",{className:"bg-white flex flex-col lg:flex-col gap-[12px] lg:gap-[16px] w-full items-center",children:(0,n.jsx)(w.Z,{type:"readonly",inputSize:"20px",value:"".concat((0,g.u)(r.probability.probabilityBelow,2),"%"),label:"Chiude sopra lo strike di Breakeven"})}),(0,n.jsx)("div",{className:"bg-white flex flex-col lg:flex-col gap-[12px] lg:gap-[16px] w-full items-center",children:(0,n.jsx)(w.Z,{type:"readonly",inputSize:"20px",value:"".concat((0,g.u)(r.probability.probabilityAbove,2),"%"),label:"Chiude sotto lo strike di Breakeven"})})]})]})]})})})}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.data,r=e.calculate,a=(0,x.Z)().t,i=((0,P.Z)().isLg,(0,m.a)().authUser,function(e,t){"prize"===t&&(e.strategia.result.max_loss=-100*e.strategia.result.prize/e.result.capitale),e.strategia.result.prize=-1*e.result.capitale/100*e.strategia.result.max_loss,r(e)}),o=function(e,r,a,n){var o,l=Object.assign({},t),s=a?Math.pow(10,a):1,c=Math.round(Number(r)*s)/s;o=parseFloat(c.toFixed(a||0)),"capitale"===e?l.result.capitale=o:"qty"==e||(l.strategia.result=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){D(e,t,r[t])}))}return e}({},l.strategia.result,D({},e,o))),i(l,e)},l=function(e,r){var a=Object.assign({},t);a.strategia.operations[r].qty=Math.round(100*e)/100,i(a,"qty")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{foldable:!0,title:"Risultato",icon:"insights",children:(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.result.capitale,2,!0),label:a("pages.profitRisk.startingCapital"),onChange:function(e){return o("capitale",e)},min:1}),(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.result.valore_contratto,0,!0),label:"Valore contratto",step:1,min:1,onChange:function(e){return o("valore_contratto",e,0)}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsxs)("div",{className:"w-full flex flex-col gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.operations[0].qty,2,!0),label:"Quantit\xe0 contratti BUY",min:1,step:.01,onChange:function(e){return l(e,0)}}),(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.operations[1].qty,2,!0),label:"Quantit\xe0 contratti SELL",min:1,step:.01,onChange:function(e){return l(e,1)}})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"readonly",value:(0,g.u)(t.strategia.result.max_profit,2)+(0,g.z)(t.symbol.currency),inputColor:"#2CD99F",label:"Premio"})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"readonly",value:(0,g.u)(t.strategia.result.max_loss,2)+(0,g.z)(t.symbol.currency),inputColor:"#E3316C",label:"Max Loss Lorda"})})]}),(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"readonly",label:"Max Profit %",className:"no-margin",inputColor:"#2CD99F",value:"".concat((0,g.u)(t.strategia.result.max_profit/t.result.capitale*100,2),"%")})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(w.Z,{type:"readonly",label:"Max Loss %",className:"no-margin",inputColor:"#E3316C",value:"".concat((0,g.u)(t.strategia.result.max_loss/t.result.capitale*-100,2),"%")})})]})]})]})]})}),(0,n.jsx)(j.Z,{foldable:!0,title:"Simula profitto o perdita della posizione",icon:"functions",children:(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.result.prezzo_simulato,2,!0),label:"Strike a scadenza",step:.01,max:100,min:0,onChange:function(e){return o("prezzo_simulato",e,2)}}),(0,n.jsx)(w.Z,{type:"readonly",value:(0,g.u)(t.strategia.result.profitto_simulato)+(0,g.z)(t.symbol.currency),inputColor:t.strategia.result.profitto_simulato<0?"#E3316C":"#2CD99F",label:"P/L"})]})})]})};function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){var t=e.data,r=e.calculate,a=(0,x.Z)().t,i=((0,m.a)().authUser,function(e,a,i){var n,o=Object.assign({},t),l=i?Math.pow(10,i):1,s=Math.round(Number(a)*l)/l;n=parseFloat(s.toFixed(i||0)),"capitale"===e?o.result.capitale=n:o.strategia.result=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){L(e,t,r[t])}))}return e}({},o.strategia.result,L({},e,n)),r(o,e)});return(0,s.useEffect)((function(){return r(t,"capitale")}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{foldable:!0,title:"Risultato",icon:"insights",children:(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-[24px] items-start",children:[(0,n.jsxs)("div",{className:"flex flex-row w-full gap-[24px]",children:[(0,n.jsx)("div",{className:"lg:w-1/2",children:(0,n.jsx)(w.Z,{type:"number",info:a("pages.profitRisk.startingCapitalTooltip"),className:"no-margin first",label:a("pages.profitRisk.startingCapital"),value:(0,g.u)(t.result.capitale,2,!0),onChange:function(e){return i("capitale",e)}})}),(0,n.jsx)("div",{className:"lg:w-1/2",children:(0,n.jsx)(w.Z,{type:"number",info:a("pages.profitRisk.contractsWeightTooltip"),label:a("pages.profitRisk.contractsWeight"),min:1,className:"bg-white overflow-hidden no_border",value:Number(t.strategia.result.valore_contratto),onChange:function(e){return i("valore_contratto",e)}})})]}),(0,n.jsxs)("div",{className:"flex flex-row w-full gap-[24px]",children:[(0,n.jsx)("div",{className:"lg:w-1/3",children:(0,n.jsx)(w.Z,{type:"readonly",info:a("pages.profitRisk.numberOfMaximumContractsTooltip"),className:"bg-white overflow-hidden no_border no-margin",label:a("pages.profitRisk.numberOfMaximumContracts"),value:(0,g.u)(t.strategia.operations[0].qty/(t.strategia.result.valore_contratto||1))})}),(0,n.jsx)("div",{className:"lg:w-1/3",children:(0,n.jsx)(w.Z,{type:"readonly",info:a("pages.profitRisk.cashedMontlyPriceTooltip"),className:"last",label:a("pages.profitRisk.cashedMontlyPrice"),inputColor:"#2BD99F",value:(0,g.u)(t.strategia.result.premio_incassato)+(0,g.z)(t.symbol.currency)})}),(0,n.jsx)("div",{className:"lg:w-1/3",children:(0,n.jsx)(w.Z,{type:"readonly",info:a("pages.profitRisk.bep_strike"),label:"Strike Price di breakeven",className:"no-margin",value:(0,g.u)(t.breakeven,2)})})]})]}),(0,n.jsx)(w.Z,{type:"slider",slider:!0,min:0,max:50,step:.01,info:a("pages.profitRisk.expectedReturnTooltip"),label:a("pages.profitRisk.expectedReturn"),value:(0,g.u)(t.strategia.result.rendimento,2,!0),onChange:function(e){return i("rendimento",e,2)},onSlideChange:function(e){return i("rendimento",e.x,2)},isPercent:!0}),(0,n.jsx)(w.Z,{type:"slider",slider:!0,min:1,max:70,step:1,info:a("pages.profitRisk.safetyPriceTooltip"),label:a("pages.profitRisk.safetyPrice"),value:(0,g.u)(t.strategia.result.prezzo_sicurezza,0,!0),onChange:function(e){return i("prezzo_sicurezza",e,0)},onSlideChange:function(e){return i("prezzo_sicurezza",e.x,0)}})]})}),(0,n.jsx)(j.Z,{foldable:!0,title:"Simula profitto o perdita della posizione",icon:"functions",children:(0,n.jsxs)("div",{className:"flex flex-row gap-[24px] w-full",children:[(0,n.jsx)(w.Z,{type:"number",info:a("pages.profitRisk.simulatedPriceTooltip"),label:"Strike a scadenza",className:"no-margin",step:.01,max:100,min:0,value:(0,g.u)(t.strategia.result.prezzo_simulato,2,!0),onChange:function(e){return i("prezzo_simulato",e,2)}}),(0,n.jsx)(w.Z,{type:"readonly",info:a("pages.profitRisk.simulatedProfitLossTooltip"),label:a("pages.profitRisk.simulatedProfitLoss"),className:"no-margin",inputColor:Number(t.strategia.result.profitto_simulato)>0?"#2CD99F":"#E3316C",value:"".concat((0,g.u)(t.strategia.result.profitto_simulato)).concat((0,g.z)(t.symbol.currency))})]})})]})};function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(e){var t=e.data,r=e.calculate,a=(0,x.Z)().t,i=((0,m.a)().authUser,function(e,t){"prize"===t&&(e.strategia.result.max_loss=-100*e.strategia.result.prize/e.result.capitale),e.strategia.result.prize=-1*e.result.capitale/100*e.strategia.result.max_loss,r(e)}),o=function(e,r,a){var n,o=Object.assign({},t),l=a?Math.pow(10,a):1,s=Math.round(Number(r)*l)/l;n=parseFloat(s.toFixed(a||0)),"capitale"===e?o.result.capitale=n:o.strategia.result=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){q(e,t,r[t])}))}return e}({},o.strategia.result,q({},e,n)),i(o,e)};return(0,s.useEffect)((function(){return i(t,"max_loss")}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{title:"Risultato",icon:"insights",foldable:!0,className:"w-full",children:(0,n.jsxs)("div",{className:"flex gap-[24px] flex-col w-full",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.result.capitale,2,!0),label:a("pages.profitRisk.startingCapital"),onChange:function(e){return o("capitale",e)},min:1}),(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.result.valore_contratto,0,!0),label:"Valore contratto",step:1,min:1,onChange:function(e){return o("valore_contratto",e,0)}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"lg:w-1/2",children:(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.result.max_loss,2,!0),label:"Max Loss %",min:0,max:100,after:"%",step:.01,onChange:function(e){return o("max_loss",e,2)}})}),(0,n.jsx)("div",{className:"lg:w-1/2",children:(0,n.jsx)(w.Z,{type:"number",value:(0,g.u)(t.strategia.result.prize,2,!0),label:"Premio da pagare",step:.01,max:0,onChange:function(e){return o("prize",e,2)}})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"readonly",value:(0,g.u)(t.strategia.operations[0].qty/(t.strategia.result.valore_contratto||1)),label:"Quantit\xe0"}),(0,n.jsx)(w.Z,{type:"readonly",info:a("pages.profitRisk.bep_strike"),label:"Strike Price di breakeven",className:"no-margin",value:(0,g.u)(t.breakeven,2)})]})]})}),(0,n.jsx)(j.Z,{title:"Simula profitto o perdita della posizione",icon:"functions",foldable:!0,className:"w-full",children:(0,n.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"number",label:"Strike a scadenza",className:"no-margin",step:.01,max:100,min:0,value:(0,g.u)(t.strategia.result.prezzo_simulato,2,!0),onChange:function(e){return o("prezzo_simulato",e,2)}}),(0,n.jsx)(w.Z,{type:"readonly",label:a("pages.profitRisk.simulatedProfitLoss"),className:"no-margin",inputColor:Number(t.strategia.result.profitto_simulato)>0?"#2CD99F":"#E3316C",value:(0,g.u)(t.strategia.result.profitto_simulato)+(0,g.z)(t.symbol.currency)})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)(w.Z,{type:"readonly",label:"Rendimento sul premio",className:"no-margin",after:"%",value:"".concat((0,g.u)(t.strategia.result.profitto_simulato/t.strategia.result.prize*-100,2),"%")}),(0,n.jsx)(w.Z,{type:"readonly",label:"Rendimento sul capitale",className:"no-margin",after:"%",value:"".concat((0,g.u)(t.strategia.result.profitto_simulato/t.result.capitale*100,2),"%")})]})]})})]})};var T=function(e){var t=e.data,r=e.calculate,a=(0,s.useState)(!0);return a[0],a[1],(0,n.jsx)("div",{className:"flex flex-col gap-[24px] w-full",children:function(){switch(t.strategia.key){case"speculativa":return(0,n.jsx)(I,{data:t,calculate:r});case"income":return(0,n.jsx)(F,{data:t,calculate:r});case"conservativa":return(0,n.jsx)(R,{data:t,calculate:r})}}()})},X=r(3904),A=r(815),U=r(6159),B=r(1721),V=r(4893);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $(e,t,r,a,i,n,o){try{var l=e[n](o),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(a,i)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){Q(e,t,r[t])}))}return e}function K(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof X.Z&&null!=e[X.Z.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(){var e,t,r,a,x,g,v,b,h=(0,U.rV)("momentum"),j={speculativa:{key:"speculativa",label:"Speculativa",operations:[{strikePerc:30,op:"buy",type:"put",strikePrice:0,strikePnt:0,price:6,qty:1}],result:{max_loss:3.6,prize:0,valore_contratto:1,qty:10,prezzo_simulato:26,profitto_simulato:0}},income:{key:"income",label:"Income",operations:[{strikePerc:5,op:"sell",type:"call",strikePrice:0,strikePnt:0,price:.61,qty:1}],result:{valore_contratto:1,rischio:0,premio_incassato:0,rendimento:10,prezzo_sicurezza:17,qty:0,prezzo_simulato:0,profitto_simulato:0,peso_contratti:0}},conservativa:{key:"conservativa",label:"Conservativa",operations:[{strikePerc:30,op:"buy",type:"call",strikePrice:0,strikePnt:0,price:1.3,qty:1},{strikePerc:5,op:"sell",type:"call",strikePrice:0,strikePnt:0,price:2,qty:1}],result:{qty:10,profitto_simulato:0,max_loss:0,max_profit:0,prezzo_simulato:25,valore_contratto:1}}};(null===h||void 0===h?void 0:h.strategia)&&(null===h||void 0===h||null===(e=h.strategia)||void 0===e?void 0:e.key)&&(j[null===h||void 0===h||null===(v=h.strategia)||void 0===v?void 0:v.key]=Object.assign(j[null===h||void 0===h||null===(b=h.strategia)||void 0===b?void 0:b.key],null===h||void 0===h?void 0:h.strategia));var w=(0,P.Z)().isLg,k=((0,m.a)(),(0,B.Z)()),z=k.authUser,S=k.loading,M=k._signOut,C=(k._store,k.isLoggedin),_=(0,s.useState)(V.filter((function(e){return e.platform.indexOf("momentum")>-1}))),Z=_[0],D=_[1],R=(0,s.useState)(!1),L=R[0],F=R[1],q=(0,l.useRouter)(),I=(0,s.useState)(!1),W=I[0],Q=I[1],G=(0,s.useState)("EUR"),H=(G[0],G[1]),J=(0,s.useState)((0,U.rV)("strategia")&&Object.keys(j).indexOf((0,U.rV)("strategia"))>-1?(0,U.rV)("strategia").toString():"speculativa"),ee=J[0],te=(J[1],(0,s.useState)(Z[0].key)),re=te[0],ae=te[1],ie=(0,s.useState)(Z.find((function(e){return e.key==re}))),ne=ie[0],oe=ie[1],le=(0,s.useState)({strategia:j[ee],symbol:Object.assign({},ne),month:(null===h||void 0===h?void 0:h.month)?new Date(h.month):y.getExpiringDate(new Date,3)<=new Date?(new Date).setMonth((new Date).getMonth()+1):new Date,today:(null===h||void 0===h?void 0:h.today)?new Date(null===h||void 0===h?void 0:h.today):new Date,expire:(null===h||void 0===h?void 0:h.expire)?new Date(null===h||void 0===h?void 0:h.expire):void 0,breakeven:0,probability:{volatilita:(null===h||void 0===h||null===(t=h.probability)||void 0===t?void 0:t.volatilita)||74,interestRate:Number(null===h||void 0===h||null===(r=h.probability)||void 0===r?void 0:r.interestRate),oggi:(null===h||void 0===h||null===(a=h.probability)||void 0===a?void 0:a.oggi)?new Date(null===h||void 0===h||null===(x=h.probability)||void 0===x?void 0:x.oggi):new Date},result:{capitale:Number((null===h||void 0===h||null===(g=h.result)||void 0===g?void 0:g.capitale)||1e3)},days:Number(null===h||void 0===h?void 0:h.days)}),se=le[0],ce=le[1],ue=function(e,t){switch(e.expire||(e.expire=y.getExpiringDate(se.month,3),e.days=Math.ceil((e.expire-Number(e.today))/864e5)),e.strategia.key){case"speculativa":e=y.result.speculativa(e);break;case"conservativa":e=y.result.conservativa(e);break;case"income":e=y.result.income(e,t)}e.probability.prezzoStimatoCall=y.prezzoStimatoCall(e),e.probability.prezzoStimatoPut=y.prezzoStimatoPut(e),e.probability.prezzoStimatoPut=y.prezzoStimatoPut(e);var r=y.probability(e);e.probability.probabilityAbove=r.above,e.probability.probabilityBelow=r.below,ce(e)};return(0,s.useEffect)((function(){var e=K(Z),t=function(){var t,r=(t=i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("/api/stock_data_stock");case 2:t.sent.data.data.prices.values.map((function(t){e.map((function(r,a){t[0]==r.stockdio&&(e[a].price=t[2],e[a].vol=t[3],e[a].perc=t[4])}))})),D(e),r=e.find((function(e){return e.key===ne.key})),oe(Y({},ne,{price:!L&&(null===h||void 0===h?void 0:h.symbol)?null===h||void 0===h?void 0:h.symbol.price:null===r||void 0===r?void 0:r.price}));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,i){var n=t.apply(e,r);function o(e){$(n,a,i,o,l,"next",e)}function l(e){$(n,a,i,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();t().catch(console.error)}),[]),(0,s.useEffect)((function(){if(ne.key){var e=Object.assign({},se);e.symbol=Object.assign({},ne),e.strategia.operations.map((function(t,r){e.strategia.operations[r].strikePrice=Number(Number(e.symbol.price)+Number(e.symbol.price)*Number(t.strikePerc)/100),e.strategia.operations[r].strikePnt=Number(e.symbol.price)-e.strategia.operations[r].strikePrice})),L||((null===h||void 0===h?void 0:h.symbol)&&h.symbol.key==ne.key&&(e.symbol.price=null===h||void 0===h?void 0:h.symbol.price),F(!0)),ue(e)}}),[ne]),(0,s.useEffect)((function(){return oe(Z.find((function(e){return e.key==re})))}),[re]),(0,s.useEffect)((function(){se.strategia&&L&&((0,U.OK)("strategia",se.strategia.key),(0,U.OK)("momentum",se))}),[se]),(0,s.useEffect)((function(){var e=Object.assign({},se);e.strategia.operations.map((function(t,r){e.strategia.operations[r].strikePrice=Number(Number(e.symbol.price)+Number(e.symbol.price)*Number(t.strikePerc)/100),e.strategia.operations[r].strikePnt=Number(e.symbol.price)-e.strategia.operations[r].strikePrice})),ue(e)}),[se.strategia.key]),(0,s.useEffect)((function(){if(C(z)||(M(),q.push("/login")),!S&&z){var e=(0,A.Z)(z,"momentum");Q(e),e&&H(z&&z.pref&&z.pref.currency?z.pref.currency:"eur")}}),[z,S]),!z||S?(0,n.jsx)(f.Z,{withMenu:!0}):W?(0,n.jsxs)("div",{className:"lg:flex h-full",children:[(0,n.jsx)(d.Z,{title:"Momentum Station"}),(0,n.jsx)(p.Z,{active:"dashboard"}),(0,n.jsxs)("div",{className:"w-full relative h-full",children:[(0,n.jsxs)(u.Z,{className:"flex w-full  flex-row justify-between items-center h-[150px] py-3 mb-3 z-[1000]",children:[(0,n.jsx)("div",{className:"flex w-full justify-start",children:Z&&(0,n.jsx)("div",{className:"flex w-full justify-start",children:null===Z||void 0===Z?void 0:Z.map((function(e){return(0,n.jsx)(X.Z,{sym:e,current:re===e.key,onClick:ae},e.key)}))})}),(0,n.jsx)("div",{className:"w-full flex flex-row",children:(0,n.jsx)("div",{className:"ml-auto flex flex-col lg:flex-row lg:gap-3 items-center",children:Object.values(j).map((function(e){return(0,n.jsx)(c.Z,{className:"m-0 bg-transparent shadow-none py-[8px]",onClick:function(){return ue(Y({},se,{strategia:e}))},style:{textDecoration:e.key==se.strategia.key?"underline":""},children:e.label},e.key)}))})})]}),"basic"===z.momentum&&"admin"!=z.role&&"conservativa"==se.strategia.key?(0,n.jsx)("div",{className:"h-full mt-[50px]",children:(0,n.jsxs)("div",{className:"text-center w-full flex flex-col justify-center ",children:["Il piano basic non prevede l'utilizzo della strategia ",se.strategia.key]})}):(0,n.jsxs)("div",{className:"lg:mt-5 flex flex-col gap-[24px] pb-20",id:"page-content",children:[(0,n.jsxs)("div",{className:"flex lg:flex-row flex-col gap-[24px]",children:[(0,n.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-[24px]",children:[(0,n.jsx)(N,{data:se,calculate:ue}),w&&(0,n.jsx)(E,{data:se,calculate:ue})]}),(0,n.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-[24px]",children:[(0,n.jsx)(T,{data:se,calculate:ue}),!w&&(0,n.jsx)(E,{data:se,calculate:ue})]})]}),w&&(0,n.jsx)(O,{data:se,calculate:ue})]})]})]}):(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,n.jsx)(d.Z,{title:"Momentum Station"}),(0,n.jsx)(p.Z,{active:"dashboard"}),(0,n.jsxs)("div",{className:"text-center w-full flex flex-col justify-center ",children:["Per utilizzare momentum aggiorna il tuo piano",(0,n.jsx)(c.Z,{label:"Upgrade",className:"w-[300px] mx-auto mt-4 bg-[#009a0f]"})]})]})}},4046:function(e,t,r){"use strict";r.d(t,{z:function(){return a},u:function(){return i}});var a=function(e){switch(e){case"eur":return"\u20ac";case"usd":return"$";case"gbp":return"\xa3"}return""},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Math.pow(10,t),i=Math.round(Number(e)*a)/a;return r?i:i.toLocaleString("it-IT",{minimumFractionDigits:t})}},4893:function(e){"use strict";e.exports=JSON.parse('[{"key":"sp500","name":"SP500","currency":"usd","price":null,"vol":null,"perc":null,"ig":"IX.D.SPTRD.IFD.IP","stockdio":"^SPXF","hierarchy":346003,"volEstimation":"vix","tradeable":["quantum"],"platform":["quantum"],"twelve":"SPX"},{"key":"eu50","name":"EU50","currency":"eur","price":null,"vol":null,"perc":null,"ig":"IX.D.STXE.IFD.IP","stockdio":"^STOXX50E","hierarchy":302518,"volEstimation":"vstoxx","tradeable":["quantum"],"platform":["quantum"],"twelve":"STOXX50E"},{"key":"vix","name":"VIX","currency":"usd","price":null,"vol":null,"perc":null,"ig":"CC.D.VIX.UME.IP","stockdio":"^VIX","tradeable":["momentum"],"platform":["quantum","momentum"],"twelve":"VIX"},{"key":"vix_futures","name":"VIX Futures","currency":"usd","price":null,"vol":null,"perc":null,"ig":"CC.D.VIX.UME.IP","stockdio":"^VX","tradeable":["momentum"],"platform":["momentum"]},{"key":"vstoxx","name":"VSTOXX","currency":"eur","price":null,"vol":null,"perc":null,"ig":"CC.D.VSTOXX.UNC.IP","stockdio":"^V2TX","tradeable":[],"platform":["quantum"],"twelve":"V2TX"}]')}},function(e){e.O(0,[624,782,154,628,335,774,888,179],(function(){return t=6213,e(e.s=t);var t}));var t=e.O();_N_E=t}]);