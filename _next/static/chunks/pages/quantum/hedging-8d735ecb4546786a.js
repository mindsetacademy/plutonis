(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{4677:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quantum/hedging",function(){return r(7589)}])},2254:function(e,t,r){"use strict";var n=r(5893),l=r(6046);t.Z=function(e){var t=e.withMenu;return(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)(l.Z,{}),(0,n.jsx)("div",{className:"flex items-center justify-center",style:{background:'url("/assets/images/bg_quantum.jpg") top center no-repeat',backgroundSize:"cover",height:"100vh"},children:(0,n.jsx)("img",{src:"/assets/images/loading.gif",className:"w-[60px] h-[60px] mt-[50px] mx-auto",alt:"loading"})})]})}},815:function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return!1;if(["demo"].indexOf(e.role)>-1)return!1;switch(t){default:return!0;case"quantum":return!("hedging"==r&&["basic"].indexOf(e.role)>-1)&&["admin","pro","basic"].indexOf(e.role)>-1;case"momentum":return["admin"].indexOf(e.role)>-1||["pro","basic"].indexOf(e.momentum)>-1}}r.d(t,{Z:function(){return n}})},7589:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(5893),l=r(1163),i=r(7294),u=r(6046),a=r(9491),o=r(8489),s=r(3996);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}var d=function(e){var t=e.settings,r=e.setSettings,l=(0,a.Z)().t;return(0,n.jsx)(o.Z,{icon:"settings",title:l("common.parameters"),foldable:!0,folded:!0,children:(0,n.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:"Strike",step:1,min:1,value:t.strike,type:"number",onChange:function(e){return r(p({},t,{strike:Number(e)}))}})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:l("common.grid"),step:1,min:1,value:t.grid,type:"number",onChange:function(e){return r(p({},t,{grid:Number(e)}))}})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:l("pages.hedging.optionPointValue"),step:1,min:1,value:t.pntOptions,type:"number",onChange:function(e){return r(p({},t,{pntOptions:Number(e)}))}})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:l("pages.hedging.futurePointValue"),step:1,min:1,value:t.pntFuture,type:"number",onChange:function(e){return r(p({},t,{pntFuture:Number(e)}))}})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:l("pages.hedging.optionCommission"),step:.01,min:0,value:t.commissionOptions,type:"number",onChange:function(e){return r(p({},t,{commissionOptions:Number(e)}))}})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:l("pages.hedging.futureCommission"),step:.01,min:0,value:t.commissionFuture,type:"number",onChange:function(e){return r(p({},t,{commissionFuture:Number(e)}))}})})]})]})})},f=r(1721),m=r(2535);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){v(e,t,r[t])}))}return e}var g=void 0,x={strikes:[],settings:{},future:{buy:{price:0,qty:0},sell:{price:0,qty:0}},calculate:function(e,t){var r=x.settings,n=x.populateStrikes(),l=n.length;e&&e.length&&n.map((function(t,l){var i=e.find((function(e){return e.strike===t.strike}));i&&(i.put.value=-1*Number(i.put.price)*Number(i.put.qty)*r.pntOptions,i.call.value=-1*Number(i.call.price)*Number(i.call.qty)*r.pntOptions,n[l]=i)}));var i=0,u=n.map((function(e){return Number(e.put.value)+Number(e.call.value)})).reduce((function(e,t){return e+t})),a=n.map((function(e){return Math.abs(Number(e.put.qty))+Math.abs(Number(e.call.qty))})).reduce((function(e,t){return e+t})),o=u-((Number(t.buy.qty)+Number(t.sell.qty))*r.commissionFuture+a*r.commissionOptions);n.map((function(e,t){n[t].putValue=Number(e.put.qty)*Number(r.pntOptions)*Number(t)*Number(r.grid),i+=Number(n[t].putValue)}));var s=Number(t.buy.qty)*r.pntFuture*(Number(t.buy.price)-n[0].strike)-Number(t.sell.qty)*r.pntFuture*(Number(t.sell.price)-n[0].strike);return n[0].profit.creditDebits=i-s,n[0].profit.payOff=n[0].profit.creditDebits+o,n.map((function(e,t){n[t].callN=(n[t-1]?Number(n[t-1].callN):0)+n[t].call.qty,n[l-t]&&(n[l-t].putN=(n[l-t+1]?Number(n[l-t+1].putN):0)+n[l-t].put.qty)})),n.map((function(e,l){var i=r.pntFuture/r.pntOptions;n[l].callPut=Number(e.callN)-Number(n[l+1]?n[l+1].putN:0)+i*Number(t.buy.qty)-i*Number(t.sell.qty)})),n.map((function(e,t){t&&(n[t].profit.creditDebits=n[t-1].profit.creditDebits+n[t-1].callPut*r.pntOptions*r.grid,n[t].profit.payOff=n[t].profit.creditDebits+o)})),console.log(n),n},getValue:function(e,t){var r=x.settings,n=e[t],l=(n.qty,n.price);if(l&&quantity){if("put"===t)return-1*l*quantity*r.pntOptions;if("call"===t)return l*quantity*-1*r.pntOptions}return null},line:function(e){return 100-x.controvaloreTotalePercentage(e)/2*100},premioIncassato:function(e){return e.put.price*e.put.qty},controvaloreTotale:function(e){return{put:e.put.multiplier*e.put.qty*e.put.strike,copertura:e.copertura.multiplier*e.copertura.qty*e.copertura.coperturaStrike}},controvaloreTotalePercentage:function(e){var t=e.put.controvalore/e.copertura.controvalore;return t>2&&(t=2),t<0&&(t=0),t},coperTuraLivelloDalloStrike:function(e){return e.put.strike*(1+e.put.percPutStrike/100)},coperTuraLivelloChiusuraCopertura:function(e){return e.copertura.coperturaStrike*(1+e.put.percPutCopertura/100)},livelloDelNuovoStrike:function(e){return e.put.percPutStrike/100+e.put.percPutCopertura/100},opzionePutScenarioSottostante:function(e){return e.copertura.sottostante>=e.put.strike?0:e.put.strike-e.copertura.sottostante},dalloStrikePrice:function(e){return e.copertura.sottostante/e.put.strike-1},profitAndLoss:function(e){var t=e.put.multiplier*e.put.qty*e.put.price-e.put.multiplier*e.put.qty*x.opzionePutScenarioSottostante(e),r=e.copertura.controvalore-e.copertura.multiplier*e.copertura.qty*e.copertura.sottostante;return{opzionePut:t,copertura:r,totale:t+r}},populateStrikes:function(){var e=[];return x.strikeLevels().forEach((function(t){e.push({strike:t,call:{qty:null,price:null},put:{qty:null,price:null},profit:{},putN:0,callN:0,callPut:0})})),e},populateFutures:function(){return{buy:{qty:null,price:null},sell:{qty:null,price:null}}},getStrikeClass:function(e){return e.profit.payOff>0?"bg-[#21ba45] text-white":e.profit.payOff<0?"bg-[#c10015] text-white":e.strike==x.settings.strike?"bg-[#093976] text-white":"bg-[#ddd]"},strikeLevels:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,t=x.settings,r=[],n=(null===t||void 0===t?void 0:t.strike)-e*(null===t||void 0===t?void 0:t.grid),l=(null===t||void 0===t?void 0:t.strike)+e*(null===t||void 0===t?void 0:t.grid),i=n;i<=l;i+=null===t||void 0===t?void 0:t.grid)r.push(i);return r},tableData:function(){return x.strikes.map((function(e,t){return h({},e,{call:h({},e.call,{value:x.getValue(e,"call")}),put:h({},e.put,{value:x.getValue(e,"put")})})}))},summary:function(){var e=x.tableData().map((function(e){return e.call.value})).filter((function(e){return e})).reduce((function(e,t){return e+t}),0),t=x.tableData().map((function(e){return e.put.value})).filter((function(e){return e})).reduce((function(e,t){return e+t}),0);return{totalCall:e,totalPut:t,openPosition:e+t}},totalOperations:function(){var e=0;x.tableData().forEach((function(t){t.call.qty&&(e+=Math.abs(t.call.qty)),t.put.qty&&(e+=Math.abs(t.put.qty))}));var t=x.future,r=t?t.buy.qty+t.sell.qty:0;return{option:e,future:r}},totalCommissions:function(){var e=x.settings,t={option:parseFloat((x.totalOperations().option*e.commissionOptions).toFixed(2)),future:parseFloat((x.totalOperations().future*e.commissionFuture).toFixed(2))};return h({},t,{total:t.option+t.future})},totalCreditDebit:function(){return Math.round(x.summary().openPosition-x.totalCommissions().total)||0},futureTableData:function(){return g.future?[g.future]:[]},isFuture:function(){var e=x.future;return e&&(e.buy.qty&&e.buy.price||e.sell.price&&e.sell.qty)},calls:function(){for(var e=x.strikes,t=[],r=0,n=0;n<e.length;n++)r=e[n].call&&e[n].call.qty?parseInt(e[n].call.qty):0,0===n?t.push(r):t.push(t[t.length-1]+r);return t},puts:function(){for(var e=x.strikes,t=[],r=0,n=e.length-1;n>=0;n--)r=e[n].put&&e[n].put.qty?parseInt(e[n].put.qty):0,n===e.length-1?t.push(r):t.push(t[t.length-1]+r);return t.reverse(),t},ups:function(){for(var e,t=x.strikes,r=x.settings,n=[],l=t.length-1;l>=0;l--)e=l===t.length-1?x.calls()[l]-0:x.calls()[l]-x.puts()[l+1],x.isFuture()&&(e+=r.pntFuture/r.pntOptions*g.future.buy.qty-r.pntFuture/r.pntOptions*g.future.sell.qty),n.push(e);return n.reverse(),n},downs:function(){for(var e=[],t=0;t<x.ups().length;t++)0===t?e.push(-1*x.ups()[0]):e.push(-1*x.ups()[t-1]);return e},varStrikes:function(){return x.strikes.map((function(e,t){return t*m.settings.grid}))},varStrikeMultiplies:function(){return x.strikes.map((function(e,t){return e.put&&e.put.qty?undefined.varStrikes[t]*e.put.qty*m.settings.pntOptions:null}))},varStrikeMultipliesTotal:function(){var e=x.settings,t=x.varStrikeMultiplies().filter((function(e){return e})).reduce((function(e,t){return e+t}),0);if(x.isFuture()){var r=x.future;t-=r.buy.qty*e.pntFuture*(r.buy.price-x.strikeLevels()[0])-r.sell.qty*e.pntFuture*(g.future.sell.price-x.strikeLevels()[0])}return t},creditDebits:function(){for(var e=x.settings,t=[],r=0;r<x.strikes.length;r++)0===r?t.push(x.varStrikeMultipliesTotal()):t.push(t[r-1]+x.ups()[r-1]*e.pntOptions*e.grid);return t},payoffs:function(){return x.creditDebits().map((function(e){return e+x.totalCreditDebit()}))}},b=x,y=r(4046);function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}var S=function(e){var t=e.data,r=e.currency,l=e.setData,i=(0,a.Z)().t,u=function(e){e.copertura.coperturaStrike=b.coperTuraLivelloDalloStrike(e),e.copertura.livelloChiusura=b.coperTuraLivelloChiusuraCopertura(e);var t=b.controvaloreTotale(e);e.put.controvalore=t.put,e.copertura.controvalore=t.copertura,e.copertura.percStrike=Math.round(1e4*b.dalloStrikePrice(e))/100,e.line=b.line(e);var r=b.profitAndLoss(e);e.put.pl=r.opzionePut,e.copertura.pl=r.copertura,l(e)},c=function(e,r,n){var l=n?Math.pow(10,n):1,i=Math.round(Number(r)*l)/l,a=Object.assign({},t),o=parseFloat(i.toFixed(n||0));a.put=N({},t.put,j({},e,Number(o))),u(a)},p=function(e,r,n){var l=n?Math.pow(10,n):1,i=Math.round(Number(r)*l)/l,a=Object.assign({},t),o=parseFloat(i.toFixed(n||0));a.copertura=N({},t.copertura,j({},e,Number(o))),u(a)};return(0,n.jsx)(o.Z,{title:i("pages.hedging.hedgingCalculator"),foldable:!0,icon:"calculate",children:(0,n.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.optionPutMultiplier"),step:1,min:1,value:t.put.multiplier,onChange:function(e){return c("multiplier",e,2)},info:i("pages.hedging.optionPutMultiplierTooltip"),type:"number"})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.multiplierHedging"),step:1,min:1,value:t.copertura.multiplier,onChange:function(e){return p("multiplier",e,2)},info:i("pages.hedging.multiplierHedgingTooltip"),type:"number"})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.optionPutQuantity"),type:"number",onChange:function(e){return c("qty",e,2)},value:(0,y.u)(t.put.qty,2,!0)})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.hedgingQuantity"),type:"number",onChange:function(e){return p("qty",e,2)},value:(0,y.u)(t.copertura.qty,2,!0)})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.openingPriceOption"),type:"number",onChange:function(e){return c("price",e,2)},value:t.put.price})}),(0,n.jsx)("div",{className:"w-full",children:" "})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.strikePriceOption"),type:"number",onChange:function(e){return c("strike",e)},value:(0,y.u)(t.put.strike,2,!0)})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.simulatedPriceUnderlying"),type:"number",info:i("pages.hedging.simulatedPriceUnderlyingTooltip"),onChange:function(e){return p("sottostante",e)},note:"".concat(t.copertura.percStrike,"% ").concat(i("common.from")," strike price"),value:(0,y.u)(t.copertura.sottostante,2,!0)})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{overrideType:"readonly",className:"no-margin",label:i("pages.hedging.putOptionsTotalValue"),inputColor:"#43a047",inputSize:"20px",value:"".concat((0,y.u)(t.put.controvalore,2)).concat(r)})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{overrideType:"readonly",className:"no-margin",label:i("pages.hedging.hedgingTotalValue"),inputColor:"#43a047",inputSize:"20px",value:"".concat((0,y.u)(t.copertura.controvalore,2)).concat(r)})})]}),(0,n.jsxs)("div",{className:"lineargauge hedging mb-5 mt-2",children:[(0,n.jsx)("div",{className:"indicator",style:{left:t.line+"%"},children:(0,n.jsx)("div",{className:"dot"})}),(0,n.jsx)("div",{className:"bar"})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.percentPutFromStrike"),type:"number",after:"%",info:i("pages.hedging.percentPutFromStrikeTooltip"),onChange:function(e){return c("percPutStrike",e,2)},value:(0,y.u)(t.put.percPutStrike,2,!0),step:.1})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.hedgingLevelFromStrike"),type:"readonly",info:i("pages.hedging.hedgingLevelFromStrikeTooltip"),value:(0,y.u)(t.copertura.coperturaStrike,0,!0)})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.percentHedgingClosing"),type:"number",after:"%",min:0,value:(0,y.u)(t.put.percPutCopertura,2,!0),step:.1,onChange:function(e){return c("percPutCopertura",e,2)},info:i("pages.hedging.percentHedgingClosingTooltip")})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.levelOfHedgingClosing"),value:(0,y.u)(t.copertura.livelloChiusura,0,!0),inputColor:"#fb8c00",info:i("pages.hedging.levelOfHedgingClosingTooltip"),type:"readonly"})})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-[24px]",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.putOptionPL"),type:"readonly",inputColor:t.put.pl<=0?"#c10015":"#21ba45",value:"".concat((0,y.u)(t.put.pl,2)).concat(r)})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(s.Z,{label:i("pages.hedging.hedgingPositionPL"),type:"readonly",inputColor:t.copertura.pl<=0?"#c10015":"#21ba45",value:"".concat((0,y.u)(t.copertura.pl,2)).concat(r)})})]}),(0,n.jsxs)("div",{className:"text-center w-full",children:[(0,n.jsxs)("p",{children:[i("pages.hedging.totalPL")," "]}),(0,n.jsxs)("p",{style:{fontSize:24,fontWeight:600,color:Number(t.put.pl)+Number(t.copertura.pl)<=0?"#c10015":"#21ba45"},children:[(0,y.u)(Number(t.put.pl)+Number(t.copertura.pl),2),r]})]})]})})},w=function(e){var t=e.results,r=e.currency,l=(0,a.Z)().t;return(0,n.jsx)("div",{className:"shadow w-full mt-4 rounded-[15px]",children:(0,n.jsxs)("div",{className:"flex p-[16px]",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(s.Z,{label:l("common.openPositionsCreditDebit"),overrideType:"readonly",value:"".concat((0,y.u)(t.pl,2)).concat(r)}),(0,n.jsx)(s.Z,{label:l("common.totalCommissions"),overrideType:"readonly",className:"no-margin",value:"".concat((0,y.u)(t.commissions,2)).concat(r)})]}),(0,n.jsx)("div",{className:"w-full bg-[#093976] h-auto text-white rounded-[10px] p-[16px]",children:(0,n.jsx)(s.Z,{label:l("common.creditDebitIncluded"),overrideType:"readonly",inputColor:"white",value:"".concat((0,y.u)(t.pl-t.commissions,2)).concat(r)})})]})})},k=function(e){var t=e.value,r=e.opened,l=(e.placeholder,e.type),u=e.onChange,a=(0,i.useState)(!!r),o=a[0],s=a[1];return(0,n.jsx)("div",{onClick:function(){return s(!0)},className:"w-full h-full tableInput",children:o?(0,n.jsx)("input",{onBlur:function(){return s(!1)},onFocus:function(e){return e.target.select()},style:{fontSize:14,textAlign:"center",lineHeight:"20px"},type:l,step:.01,autoFocus:!0,value:t||"",onChange:function(e){return u(e.target.value)}}):(0,n.jsx)("p",{className:"m-0",children:t?(0,y.u)(t,2):""})})};function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}var C=function(e){var t=e.future,r=e.setFuture,l=(0,a.Z)().t;return(0,n.jsx)(o.Z,{title:"Future",foldable:!0,className:"season-card",children:(0,n.jsxs)("table",{style:{borderRadius:0,borderTop:"1px solid #999"},children:[(0,n.jsxs)("thead",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{colSpan:2,className:"py-0",children:l("common.buy")}),(0,n.jsx)("th",{colSpan:2,className:"py-0",children:l("common.sell")})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-0 w-[25%]",children:l("common.price")}),(0,n.jsx)("th",{className:"p-0 w-[25%]",children:l("common.qty")}),(0,n.jsx)("th",{className:"p-0 w-[25%]",children:l("common.qty")}),(0,n.jsx)("th",{className:"p-0 w-[25%]",children:l("common.price")})]})]}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:t.buy.price||"",type:"number",onChange:function(e){return r(q({},t,{buy:q({},t.buy,{price:Number(e)})}))}})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:t.buy.qty||"",type:"number",onChange:function(e){return r(q({},t,{buy:q({},t.buy,{qty:Number(e)})}))}})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:t.sell.qty||"",type:"number",onChange:function(e){return r(q({},t,{sell:q({},t.sell,{qty:Number(e)})}))}})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:t.sell.price||"",type:"number",onChange:function(e){return r(q({},t,{sell:q({},t.sell,{price:Number(e)})}))}})})]})})]})})},P=r(5340),F=r.n(P),Z=r(5810);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t=e.data,r=e.setData,l=e.currency,u=(0,a.Z)().t,s=(0,i.useState)({call:0,put:0}),c=s[0],p=s[1],d=(0,i.useState)(!1),f=d[0],m=d[1],v=function(e,n,l,i){var u=D(t);"undefined"==typeof u[l][e]&&(u[l][e]={value:null,price:null,qty:null}),u[l][e][n]=i,r(u)};return(0,i.useEffect)((function(){var e,r,n=null===(e=null===t||void 0===t?void 0:t.map((function(e){var t;return Number((null===(t=e.put)||void 0===t?void 0:t.value)||0)})))||void 0===e?void 0:e.reduce((function(e,t){return e+t}),0),l=null===(r=null===t||void 0===t?void 0:t.map((function(e){var t;return Number((null===(t=e.call)||void 0===t?void 0:t.value)||0)})))||void 0===r?void 0:r.reduce((function(e,t){return e+t}),0);p({put:n,call:l}),b.strikes=t}),[t]),t?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("div",{className:"flex mb-3",children:[(0,n.jsx)(Z.Z,{onChange:function(){return m(!f)},checked:f,uncheckedIcon:!1,checkedIcon:!1,offColor:"#cccccc",offHandleColor:"#fff",onColor:"#093976",onHandleColor:"#093976",handleDiameter:20,height:14,width:32,id:"payoff"}),(0,n.jsx)("label",{htmlFor:"payoff",className:"ml-2",children:f?"Posizioni":"Profitti"})]}),(0,n.jsx)(o.Z,{title:"Opzioni",foldable:!0,className:"season-card",children:f?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{style:{borderRadius:0,borderTop:"1px solid #999"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:"Strike"}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("pages.hedging.pl")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("pages.hedging.pl_net")})]})}),(0,n.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){var r,i,u,a,o,s,c,p;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:b.getStrikeClass(e),children:e.strike}),(0,n.jsx)("td",{style:{color:Number(null===(r=e.profit)||void 0===r?void 0:r.creditDebits)<0?"#c10015":"black"},children:(0,n.jsx)(F(),{value:0!==(null===(i=e.profit)||void 0===i?void 0:i.creditDebits)&&(null===(u=e.profit)||void 0===u?void 0:u.creditDebits)?null===(a=e.profit)||void 0===a?void 0:a.creditDebits:0,suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})}),(0,n.jsx)("td",{style:{color:Number(null===(o=e.profit)||void 0===o?void 0:o.payOff)<0?"#c10015":"black"},children:(0,n.jsx)(F(),{value:0!==(null===(s=e.profit)||void 0===s?void 0:s.payOff)&&(null===(c=e.profit)||void 0===c?void 0:c.payOff)?null===(p=e.profit)||void 0===p?void 0:p.payOff:0,suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})})]},e.strike)}))})]})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{style:{borderRadius:0,borderTop:"1px solid #999"},children:[(0,n.jsxs)("thead",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{colSpan:3,className:"py-0",children:"Call"}),(0,n.jsx)("th",{className:"py-0"}),(0,n.jsx)("th",{colSpan:3,className:"py-0",children:"Put"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.value")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.price")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.qty")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:"Strike"}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.qty")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.price")}),(0,n.jsx)("th",{className:"p-0 w-[14.28%]",children:u("common.value")})]})]}),(0,n.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){var r,i,u,a,o,s,c,p,d,f,m,h,g,x;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{color:Number(null===(r=e.call)||void 0===r?void 0:r.value)<0?"#c10015":"black"},children:(0,n.jsx)(F(),{value:0!=(null===(i=e.call)||void 0===i?void 0:i.value)?null===(u=e.call)||void 0===u?void 0:u.value:"",suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:0!=(null===(a=e.call)||void 0===a?void 0:a.price)?null===(o=e.call)||void 0===o?void 0:o.price:"",type:"number",onChange:function(e){return v("call","price",t,Number(e))}})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:0!=(null===(s=e.call)||void 0===s?void 0:s.qty)?null===(c=e.call)||void 0===c?void 0:c.qty:"",type:"number",onChange:function(e){return v("call","qty",t,Number(e))}})}),(0,n.jsx)("td",{className:b.getStrikeClass(e),children:e.strike}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:0!=(null===(p=e.put)||void 0===p?void 0:p.qty)?null===(d=e.put)||void 0===d?void 0:d.qty:"",type:"number",onChange:function(e){return v("put","qty",t,Number(e))}})}),(0,n.jsx)("td",{children:(0,n.jsx)(k,{value:0!=(null===(f=e.put)||void 0===f?void 0:f.price)?null===(m=e.put)||void 0===m?void 0:m.price:"",type:"number",onChange:function(e){return v("put","price",t,Number(e))}})}),(0,n.jsx)("td",{style:{color:Number(null===(h=e.put)||void 0===h?void 0:h.value)<0?"#c10015":"black"},children:(0,n.jsx)(F(),{value:0!=(null===(g=e.put)||void 0===g?void 0:g.value)?null===(x=e.put)||void 0===x?void 0:x.value:"",suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})})]},e.strike)}))}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-center ",children:(0,n.jsx)(F(),{value:c.call,suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})}),(0,n.jsx)("td",{colSpan:2,className:"text-right",children:u("common.totalCallValue")}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{colSpan:2,children:u("common.totalPutValue")}),(0,n.jsx)("td",{className:"text-center",children:(0,n.jsx)(F(),{value:c.put,suffix:l,displayType:"text",thousandSpacing:"3",thousandSeparator:".",decimalSeparator:",",decimalScale:2})})]})})]})})})]}):(0,n.jsx)(n.Fragment,{})},E=r(2254),L=r(815),_=r(8829),z=r(8161),I=function(){(0,a.Z)().t;var e=(0,f.Z)(),t=e.authUser,r=e.loading,o=e.isLoggedin,s=e._signOut,c=(0,l.useRouter)(),p=(0,i.useState)(!1),m=p[0],v=p[1],h=(0,i.useState)(" \u20ac/$"),g=h[0],x=(h[1],(0,i.useState)({strike:3900,grid:100,pntOptions:1,pntFuture:1,commissionOptions:.1,commissionFuture:.1,currency:"eur"})),y=x[0],j=x[1];(0,i.useEffect)((function(){o(t)||(s(),c.push("/login")),v((0,L.Z)(t,"quantum","hedging"))}),[t,r]);var N=(0,i.useState)({put:{multiplier:1,qty:100,price:20,strike:3100,controvalore:31e4,percPutStrike:2.5,percPutCopertura:3,pl:2e3},copertura:{multiplier:10,qty:5,sottostante:3300,percStrike:6.5,controvalore:158857,coperturaStrike:3177,livelloChiusura:3273,pl:-6100},line:0}),k=N[0],O=N[1],q=(0,i.useState)([]),P=q[0],F=q[1],Z=(0,i.useState)({buy:{price:0,qty:0},sell:{price:0,qty:0}}),T=Z[0],D=Z[1],I=(0,i.useState)({pl:0,commissions:0}),V=I[0],A=I[1];(0,i.useEffect)((function(){H(),b.settings=y,D(b.populateFutures()),F(b.populateStrikes())}),[]),(0,i.useEffect)((function(){y.strike&&y.grid&&(b.settings=y,H())}),[y]);var H=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];b.settings=y;var r=b.calculate(e||P,t||T);F(r),D(t||T)};return(0,i.useEffect)((function(){var e=0,t=0;if(P){var r,n;t=null===(r=null===P||void 0===P?void 0:P.map((function(e){var t,r;return Number((null===(t=e.put)||void 0===t?void 0:t.value)||0)+Number((null===(r=e.call)||void 0===r?void 0:r.value)||0)})))||void 0===r?void 0:r.reduce((function(e,t){return e+t}),0);var l=null===(n=null===P||void 0===P?void 0:P.map((function(e){var t,r;return Number((null===(t=e.put)||void 0===t?void 0:t.qty)||0)+Number((null===(r=e.call)||void 0===r?void 0:r.qty)||0)})))||void 0===n?void 0:n.reduce((function(e,t){return Math.abs(e)+Math.abs(t)}),0);e+=Math.abs(l)*y.commissionOptions}T&&(e+=(Number(T.buy.qty)+Number(T.sell.qty))*y.commissionFuture),A({commissions:e,pl:t})}),[T,P]),!t||r?(0,n.jsx)(E.Z,{withMenu:!0}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"lg:flex w-full pb-[100px] lg:pb-3 h-full",children:[(0,n.jsx)(z.Z,{title:"Hedging"}),(0,n.jsx)(u.Z,{active:"hedging"}),(0,n.jsx)("div",{className:"w-full mt-5 lg:flex gap-[24px] ",children:m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d,{settings:y,setSettings:j})}),(0,n.jsx)(S,{data:k,setData:O,currency:g}),(0,n.jsx)(w,{currency:g,results:V})]}),(0,n.jsxs)("div",{className:"w-full pb-[100px]",children:[(0,n.jsx)(C,{future:T,setFuture:function(e){H(!1,e)}}),(0,n.jsx)(M,{data:P,setData:H,currency:g})]})]}):(0,n.jsxs)("div",{className:"text-center w-full flex flex-col justify-center ",children:["Per utilizzare hedging aggiorna il tuo piano a PRO",(0,n.jsx)(_.Z,{label:"Upgrade a PRO",className:"w-[300px] mx-auto mt-4 bg-[#009a0f]"})]})})]})})}},4046:function(e,t,r){"use strict";r.d(t,{z:function(){return n},u:function(){return l}});var n=function(e){switch(e){case"eur":return"\u20ac";case"usd":return"$";case"gbp":return"\xa3"}return""},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Math.pow(10,t),l=Math.round(Number(e)*n)/n;return r?l:l.toLocaleString("it-IT",{minimumFractionDigits:t})}}},function(e){e.O(0,[319,624,86,628,335,774,888,179],(function(){return t=4677,e(e.s=t);var t}));var t=e.O();_N_E=t}]);